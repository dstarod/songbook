{% extends 'chords/song.html' %}

{% block content %}
    <h2 class="text-center">{{ song.title }}</h2>

    {% if song.profile %}
        <div class="text-center">
            Author: {{ song.profile.author }}. Composer: {{ song.profile.composer }}.
            {% if song.profile.translator %}
                Translator: {{ song.profile.translator }}.
            {% endif %}
            {% if song.profile.year %}
                {{ song.profile.year }}.
            {% endif %}
        </div>
        <br>
    {% endif %}

    {% autoescape off %}
    <p class="song_body"><span>{{ song.body_nbsp|linebreaksbr }}</span></p>
    {% endautoescape %}

    <div class="row">
        {% if song.user == user %}
            {% for tag in song.tags.all %}
                <a class="label label-info" href="{% url 'songs:tag' pk=tag.id %}">{{ tag }}</a>
            {% endfor %}
            {% for playlist in song.playlists.all %}
                <a class="label label-primary" href="{% url 'songs:playlist' pk=playlist.id %}">{{ playlist }}</a>
            {% endfor %}
        {% endif %}
    </div>

    {% if song.user == user %}
        <br>
        <div class="row">
            <a href="{% url 'songs:song_edit' pk=song.id %}" class="btn btn-warning">Edit</a>

            {% if song.profile %}
                <a href="{% url 'songs:song_profile_edit' pk=song.profile.id %}" class="btn btn-primary">Edit profile</a>
            {% else %}
                <a href="{% url 'songs:song_profile_create' pk=song.id %}" class="btn btn-success">Create profile</a>
            {% endif %}

            <a href="{% url 'songs:song_delete' pk=song.id %}" class="btn btn-danger">Delete</a>
        </div>
    {% endif %}

{% endblock %}
